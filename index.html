<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auto's David - Documentbeheer</title>
  <meta name="theme-color" content="#1e40af">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">

  <!-- Login Page -->
  <div id="loginPage" class="min-h-screen flex items-center justify-center">
    <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
      <h2 class="text-2xl font-bold mb-6 text-center">Inloggen bij Auto's David</h2>
      <form id="loginForm" class="space-y-4">
        <div>
          <label for="username" class="block text-sm font-medium text-gray-700">Gebruikersnaam</label>
          <input id="username" type="text" required class="mt-1 block w-full border rounded-md px-3 py-2">
        </div>
        <div>
          <label for="password" class="block text-sm font-medium text-gray-700">Wachtwoord</label>
          <input id="password" type="password" required class="mt-1 block w-full border rounded-md px-3 py-2">
        </div>
        <button type="submit" class="w-full bg-primary text-white py-2 rounded-md hover:bg-blue-700 transition">
          Inloggen
        </button>
      </form>
      <p id="loginError" class="text-red-500 text-sm mt-2 hidden">Onjuiste login.</p>

      <div class="mt-6 text-center">
        <button id="showResetForm" class="text-sm text-blue-600 hover:underline">Wachtwoord resetten</button>
      </div>
    </div>
  </div>

  <!-- Reset Password -->
  <div id="resetPage" class="hidden min-h-screen flex items-center justify-center">
    <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
      <h2 class="text-2xl font-bold mb-6 text-center">Wachtwoord resetten</h2>
      <form id="resetForm" class="space-y-4">
        <div>
          <label for="newPassword" class="block text-sm font-medium text-gray-700">Nieuw wachtwoord</label>
          <input id="newPassword" type="password" required class="mt-1 block w-full border rounded-md px-3 py-2">
        </div>
        <button type="submit" class="w-full bg-primary text-white py-2 rounded-md hover:bg-blue-700 transition">
          Opslaan
        </button>
      </form>
      <div class="mt-4 text-center">
        <button id="backToLogin" class="text-sm text-gray-600 hover:underline">Terug naar login</button>
      </div>
    </div>
  </div>

  <!-- Main App -->
  <div id="mainApp" class="hidden">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 flex justify-between h-16 items-center">
        <div class="flex items-center space-x-3">
          <img id="logoImage" src="" alt="Logo" class="h-10 w-10 object-contain hidden">
          <h1 class="text-xl font-bold text-gray-900">Auto's David</h1>
        </div>
        <button id="logoutBtn" class="text-sm text-gray-500 hover:text-gray-700">
          <i class="fas fa-sign-out-alt mr-1"></i> Uitloggen
        </button>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-primary text-white">
      <div class="max-w-7xl mx-auto px-4 flex space-x-8">
        <button class="nav-item px-3 py-4 hover:border-white border-b-2 border-transparent" data-page="documenten">
          <i class="fas fa-file-alt mr-2"></i> Documenten
        </button>
        <button class="nav-item px-3 py-4 hover:border-white border-b-2 border-transparent" data-page="logo">
          <i class="fas fa-image mr-2"></i> Logo instellen
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 px-4" id="pageContent">
      <!-- Documenten Pagina -->
      <section id="documentenPage">
        <h2 class="text-2xl font-bold mb-4">Documentbeheer</h2>
        
        <!-- Upload Form -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
          <form id="uploadForm" class="flex items-center space-x-4">
            <input type="file" id="fileInput" required class="flex-1 border border-gray-300 rounded-md px-3 py-2">
            <button type="submit" class="bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
              <i class="fas fa-upload mr-2"></i> Uploaden
            </button>
          </form>
        </div>

        <!-- Document List -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-lg font-semibold mb-4">Beschikbare documenten</h3>
          <ul id="documentList" class="space-y-2 text-sm text-gray-700"></ul>
        </div>
      </section>

      <!-- Logo Upload Page -->
      <section id="logoPage" class="hidden">
        <h2 class="text-2xl font-bold mb-4">Logo instellen</h2>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <form id="logoForm" class="flex items-center space-x-4">
            <input type="file" id="logoInput" accept="image/*" required class="flex-1 border border-gray-300 rounded-md px-3 py-2">
            <button type="submit" class="bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
              <i class="fas fa-upload mr-2"></i> Logo uploaden
            </button>
          </form>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Default login data
    const defaultUser = "semret";
    if (!localStorage.getItem("password")) {
      localStorage.setItem("password", "reset123"); // init default password
    }

    const loginPage = document.getElementById("loginPage");
    const resetPage = document.getElementById("resetPage");
    const mainApp = document.getElementById("mainApp");
    const logoImage = document.getElementById("logoImage");

    // Show saved logo if available
    const savedLogo = localStorage.getItem("logo");
    if (savedLogo) {
      logoImage.src = savedLogo;
      logoImage.classList.remove("hidden");
    }

    // Login
    document.getElementById("loginForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      const storedPassword = localStorage.getItem("password");

      if (username === defaultUser && password === storedPassword) {
        loginPage.classList.add("hidden");
        resetPage.classList.add("hidden");
        mainApp.classList.remove("hidden");
      } else {
        document.getElementById("loginError").classList.remove("hidden");
      }
    });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
      mainApp.classList.add("hidden");
      loginPage.classList.remove("hidden");
    });

    // Reset password
    document.getElementById("showResetForm").addEventListener("click", () => {
      loginPage.classList.add("hidden");
      resetPage.classList.remove("hidden");
    });

    document.getElementById("backToLogin").addEventListener("click", () => {
      resetPage.classList.add("hidden");
      loginPage.classList.remove("hidden");
    });

    document.getElementById("resetForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const newPass = document.getElementById("newPassword").value;
      localStorage.setItem("password", newPass);
      alert("Wachtwoord succesvol gewijzigd!");
      resetPage.classList.add("hidden");
      loginPage.classList.remove("hidden");
    });

    // Navigation switching
    const navItems = document.querySelectorAll(".nav-item");
    const pages = {
      documenten: document.getElementById("documentenPage"),
      logo: document.getElementById("logoPage")
    };

    navItems.forEach(item => {
      item.addEventListener("click", () => {
        const target = item.getAttribute("data-page");
        Object.values(pages).forEach(p => p.classList.add("hidden"));
        if (pages[target]) pages[target].classList.remove("hidden");
      });
    });

    // Document Upload System
    const uploadForm = document.getElementById("uploadForm");
    const fileInput = document.getElementById("fileInput");
    const documentList = document.getElementById("documentList");

    function loadDocuments() {
      const docs = JSON.parse(localStorage.getItem("documents") || "[]");
      documentList.innerHTML = "";
      docs.forEach((doc, index) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center border p-2 rounded-md";
        li.innerHTML = `
          <span>${doc.name}</span>
          <div class="space-x-2">
            <a href="${doc.url}" download="${doc.name}" class="text-blue-600 hover:underline">Download</a>
            <button onclick="deleteDoc(${index})" class="text-red-500 hover:underline">Verwijderen</button>
          </div>
        `;
        documentList.appendChild(li);
      });
    }

    window.deleteDoc = function(index) {
      const docs = JSON.parse(localStorage.getItem("documents") || "[]");
      docs.splice(index, 1);
      localStorage.setItem("documents", JSON.stringify(docs));
      loadDocuments();
    }

    uploadForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const file = fileInput.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = () => {
        const docs = JSON.parse(localStorage.getItem("documents") || "[]");
        docs.push({ name: file.name, url: reader.result });
        localStorage.setItem("documents", JSON.stringify(docs));
        fileInput.value = "";
        loadDocuments();
      };
      reader.readAsDataURL(file);
    });

    // Logo Upload System
    const logoForm = document.getElementById("logoForm");
    const logoInput = document.getElementById("logoInput");

    logoForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const file = logoInput.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = () => {
        localStorage.setItem("logo", reader.result);
        logoImage.src = reader.result;
        logoImage.classList.remove("hidden");
        logoInput.value = "";
        alert("Logo succesvol geüpload!");
      };
      reader.readAsDataURL(file);
    });

    loadDocuments();
  </script>
</body>
</html>
